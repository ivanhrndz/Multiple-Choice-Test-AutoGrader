<?phpinclude 'stats.php';include 'processid.php';include 'processanswers.php';function comparearrays($x,$y){//make a function to compare two value, the key's answer and the person's answer	if ($x == $y) { //if the answers are equal		return 1; //return a 1		}	else { // if the answers are different		return 0; //return a 0		};	}$answersstring = "";$rightwrongstring = "";$rightwrong_array = array();$scorestring = "";$error=array();$extension=array("jpeg","jpg","png","gif");$results = array();$formkey = $_FILES["formkey"]["tmp_name"];$keyimg = new Imagick($formkey);$keyanswers= read_test($keyimg);foreach($_FILES["files"]["tmp_name"] as $key=>$tmp_name)		{			$file_name=$_FILES["files"]["name"][$key];			$file_tmp=$_FILES["files"]["tmp_name"][$key];			$ext=pathinfo($file_name,PATHINFO_EXTENSION);			$img = new Imagick($file_tmp);			$w = $img->getImageWidth(); //get the width of the image			$h = $img->getImageHeight(); //get the height of the image			$img2 = clone $img;				$id = read_id($img);						$answers= read_test($img2);			//$answersgresults[$id] = implode(",", $answers);			$answersstring = $answersstring.$id.",".implode(",", $answers)."\r\n";						$rightwrong = array_map("comparearrays",$keyanswers,$answers);			//$rightwrongresults[$id] = implode(",", $rightwrong);			$rightwrongstring = $rightwrongstring.$id.",".implode(",", $rightwrong)."\r\n";			array_push($rightwrong_array, $rightwrong);						$score = (array_sum($rightwrong) / count($rightwrong)) * 100;			$scorestring = $scorestring.$id.",".$score."%\r\n";					}$questionheader="ID";for ($x=1; $x <= count($answers); $x++){	$questionheader=$questionheader.",Q".$x;}echo "<!DOCTYPE html>";echo "<html>";echo "<body>";echo "<textarea rows='4' cols='50'>";echo $questionheader."\r\n".$answersstring;echo "</textarea>";echo "<br>";echo "<textarea rows='4' cols='50'>";echo $questionheader."\r\n".$rightwrongstring;echo "</textarea>";echo "<br>";echo "<textarea rows='4' cols='50'>";echo "ID,Score\r\n".$scorestring;echo "</textarea>";   echo "<br>";$difficulty = itemdifficulty($rightwrong_array);$discrimination = pointbiserial($rightwrong_array);$n = count($difficulty);echo "<textarea rows='4' cols='50'>";echo "Question,Difficulty,Discrimination\r\n";for ($i=0;$i<=$n-1;$i++){	echo "Q".($i+1).": ".$difficulty[$i].",".$discrimination[$i]."\r\n";}echo "</textarea>";   echo "</body>";echo "</html>";?>